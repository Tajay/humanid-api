"use strict";class HumanID{constructor(t){this.baseUrl=t.apiUrl,this.appId=t.appId,this.appSecret=t.appSecret,this.interval=t.interval||5e3}static async sleep(t){return new Promise(e=>setTimeout(e,t))}async login(t,e){let s=!1,a=null,r=null;for(;!s;)try{if(!(a=await fetch(this.baseUrl+"/web/users/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({countryCode:t,phone:e,appId:this.appId,appSecret:this.appSecret})})).ok){let t=await a.text();throw new Error(t)}if("CONFIRMED"===(r=await a.json()).status)s=!0;else{if("REJECTED"===r.status)throw new Error("Login request rejected");"PENDING"===r.status&&await HumanID.sleep(this.interval)}}catch(t){throw t}return s}}